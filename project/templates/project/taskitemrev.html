{% extends 'project/base.html' %}

{% block contents %}
        <h2>{{task.name}}</h2>
    <div class="taskinfo">
	<table>
            <thead>
                <tr>
                    <td>Start Date</td>
                    <td>End Date</td>
                    <td>Person Responsible</td>
                    <td>Edit</td>
                </tr>
            </thead>
	    <tbody>
            <tr>
            <td>{{task.expected_start_date|date}}</td>
            <td>{{task.expected_start_date|date}}</td>
            <td>{{task.user_responsible}}</td>
            <td><a href="{{task.edit_url}}">Edit</a></td>
            </tr>
	    </tbody>
	</table>        
    </div>
    
    <div id="taskdetails">
	
    {% if task.num_child_tasks %}
    <div id="subtasks">
	<h3>Subs tasks for {{task.name}}</h3>
	<table>
            <thead>
                <tr>
                    <td>Subtask</td>
                    <td>Start Date</td>
                    <td>End Date</td>
                    <td>Person Responsible</td>
                    <td>Edit</td>
                </tr>
            </thead>
	{% for task in task.task_set.all %}
	    <tbody>
            <tr class={% cycle "odd" "even" %}>
	    <td><a href="{{task.get_absolute_url}}">{{task.name}}</a></td>
            <td>{{task.expected_start_date|date}}</td>
            <td>{{task.expected_start_date|date}}</td>
            <td>{{task.user_responsible}}</td>
            <td><a href="{{task.edit_url}}">Edit</a></td>
            </tr>
	    </tbody>
	{% endfor %}
	</table>
    </div>
    {% endif %}
    
    {% if task.num_items %}
    <div id="taskitems">
	<h3>Items for {{task.name}}</h3>
        <table>
        <thead>
            <tr>
                <td>
                    Item
                </td>
                <td>
                    User
                </td>
                <td>
                    Time
                </td>
            </tr>
        </thead>
	{% for item in task.taskitem_set.all %}
	    <tbody>
            <tr class={% cycle "odd" "even" %}>
	    <td><a href="{{item.edit_url}}">{{item.name}}</a></td>
            <td>{{item.user}}</td>
            <td>{{item.time_worked}}</td>
            </tr>
	    </tbody>
	{% endfor %}
	</table>
    </div>
    {% endif %}
    </div>
{% endblock %}

{% block sidebar %}
    <h3>Meta</h3>
        <ul>
        <li>
            <a href="{{taskitem.edit_url}}">Edit this item</a>
        </li>
        <li>
            <a href="{{taskitem.task.get_absolute_url}}">Task</a>
        </li>
        </ul>
    This is  a version number {{taskitem.version_number}} created for {{taskitem.name}}, on {{task_item.created_on|date}}
{% endblock %}